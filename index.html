<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A1K50_PTT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
            cursor: url("https://r2.zyo.lol/cursor_url_2c8437bbd547.cur") 16 16, auto !important;
        }
        body{
            background:#000;
            min-height:100vh;
            overflow-x:hidden;
            position:relative;
        }
        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
            filter: grayscale(100%) blur(3px) brightness(0.4);
            transition: filter 2s ease;
            opacity: 0;
            will-change: filter, opacity;
        }
        .video-background.active {
            filter: grayscale(100%) blur(0px) brightness(0.6);
            opacity: 1;
        }
        .overlay_audio {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }
        .overlay_audio .text {
            color: white;
            font-size: 32px;
            font-weight: 600;
            letter-spacing: 2px;
            animation: pulse 1.5s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }
        @keyframes ripple {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
        }
        .stars{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}
        .star{position:absolute;background:white;border-radius:50%;animation:twinkle linear infinite}
        @keyframes twinkle{0%,100%{opacity:0.3;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}
        .content{position:relative;z-index:10}
        .card{backdrop-filter:blur(20px);background:linear-gradient(135deg,rgba(255,255,255,0.1)0%,rgba(255,255,255,0.05)100%);border:2px solid rgba(255,255,255,0.2);box-shadow:0 8px 32px rgba(0,0,0,0.6);animation:fadeIn 0.6s ease-out}
        @keyframes fadeIn{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
        @keyframes float{0%,100%{transform:translateY(0px)}50%{transform:translateY(-15px)}}
        .floating{animation:float 3s ease-in-out infinite}
        .preview-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:16px;max-height:500px;overflow-y:auto;padding:8px}
        .preview-item{position:relative;width:100%;height:140px;animation:fadeIn 0.3s ease-out;transition:all 0.3s cubic-bezier(0.4,0,0.2,1)}
        .preview-item:hover{transform:scale(1.08) rotate(2deg);z-index:10}
        .preview-item img{width:100%;height:100%;object-fit:cover;border-radius:12px;border:3px solid rgba(255,255,255,0.3);box-shadow:0 4px 15px rgba(0,0,0,0.5);transition:all 0.3s}
        .preview-item:hover img{box-shadow:0 8px 30px rgba(255,255,255,0.4);border-color:rgba(255,255,255,0.6)}
        .preview-item button{position:absolute;top:8px;right:8px;background:linear-gradient(135deg,#ffffff 0%,#e5e5e5 100%);color:#000;width:32px;height:32px;border-radius:50%;border:none;opacity:0;transition:all 0.3s;display:flex;align-items:center;justify-content:center;font-weight:bold;box-shadow:0 2px 10px rgba(0,0,0,0.6);cursor:pointer;font-size:18px}
        .preview-item:hover button{opacity:1;transform:scale(1.1)}
        .preview-item button:hover{transform:scale(1.3) rotate(90deg);background:#fff}
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);z-index:1000;align-items:center;justify-content:center;backdrop-filter:blur(10px)}
        .modal.active{display:flex;animation:fadeIn 0.3s ease-out}
        .gallery-item{transition:all 0.4s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;cursor:pointer}
        .gallery-item::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.15),transparent);transition:left 0.6s}
        .gallery-item:hover::before{left:100%}
        .gallery-item:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 12px 40px rgba(255,255,255,0.1)}
        .upload-btn{position:relative;overflow:hidden;transition:all 0.3s;border:none;cursor:pointer}
        .upload-btn::before{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:rgba(255,255,255,0.2);transform:translate(-50%,-50%);transition:width 0.6s,height 0.6s}
        .upload-btn:hover::before{width:400px;height:400px}
        .upload-btn:active{transform:scale(0.96)}
        @keyframes shimmer{0%{background-position:-1000px 0}100%{background-position:1000px 0}}
        .shimmer{background:linear-gradient(90deg,rgba(255,255,255,0.1)25%,rgba(255,255,255,0.3)50%,rgba(255,255,255,0.1)75%);background-size:1000px 100%;animation:shimmer 2s infinite}
        input:focus,button:focus,textarea:focus{outline:none;box-shadow:0 0 0 3px rgba(255,255,255,0.3)}
        ::-webkit-scrollbar{width:8px}
        ::-webkit-scrollbar-track{background:rgba(255,255,255,0.05);border-radius:10px}
        ::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#ffffff,#cccccc);border-radius:10px}
        ::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#ffffff,#aaaaaa)}
        .text-glow{text-shadow:0 0 20px rgba(255,255,255,0.8),0 0 40px rgba(255,255,255,0.4)}
        .live-badge{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,#ffffff 0%,#e5e5e5 100%);color:#000;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:bold;animation:pulse 2s ease-in-out infinite;box-shadow:0 4px 15px rgba(255,255,255,0.2)}
        .live-dot{width:8px;height:8px;background:#000;border-radius:50%;animation:blink 1s ease-in-out infinite}
        @keyframes blink{0%,100%{opacity:1}50%{opacity:0.3}}
        .heart-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;overflow:hidden}
        .falling-heart{position:absolute;font-size:30px;animation:heartFall 2s ease-out forwards;pointer-events:none}
        @keyframes heartFall{0%{transform:translateY(0) scale(1);opacity:1}100%{transform:translateY(80vh) scale(0.3);opacity:0}}
        .like-btn{transition:all 0.3s}
        .like-btn:active{transform:scale(1.3)}
        .like-btn.liked{animation:heartBeat 0.5s ease}
        @keyframes heartBeat{0%,100%{transform:scale(1)}25%{transform:scale(1.3)}50%{transform:scale(1.1)}75%{transform:scale(1.4)}}
        .comment-item{animation:slideIn 0.3s ease-out}
        @keyframes slideIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}
        .image-container{position:relative;width:100%;height:75vh;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.8);border-radius:12px;overflow:hidden;cursor:grab;touch-action:none}
        .image-container:active{cursor:grabbing}
        .image-wrapper{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%;transform-origin:0 0;transition:transform 0.1s ease;will-change:transform}
        #modalImage{max-width:100%;max-height:100%;object-fit:contain;user-select:none;-webkit-user-drag:none;pointer-events:none}
        .zoom-control{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,rgba(0,0,0,0.95)0%,rgba(30,30,30,0.95)100%);backdrop-filter:blur(10px);padding:12px 24px;border-radius:50px;display:flex;align-items:center;gap:16px;z-index:200;box-shadow:0 4px 20px rgba(0,0,0,0.8);border:1px solid rgba(255,255,255,0.1)}
        .zoom-btn{width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);color:white;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s}
        .zoom-btn:hover{background:rgba(255,255,255,0.2);transform:scale(1.1)}
        .zoom-slider{width:150px;height:6px;border-radius:3px;background:rgba(255,255,255,0.2);outline:none;-webkit-appearance:none;cursor:pointer}
        .zoom-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:white;cursor:pointer;box-shadow:0 2px 10px rgba(255,255,255,0.3);transition:all 0.2s}
        .zoom-slider::-webkit-slider-thumb:hover{transform:scale(1.2);background:#f5f5f5;box-shadow:0 4px 15px rgba(255,255,255,0.5)}
        .zoom-slider::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:white;cursor:pointer;border:none;box-shadow:0 2px 10px rgba(255,255,255,0.3)}
        #zoomValue{min-width:45px;text-align:center;font-weight:bold;font-size:14px;color:white}
        .info-panel{position:fixed;bottom:100px;left:20px;z-index:200;max-width:300px;background:linear-gradient(135deg,rgba(0,0,0,0.95)0%,rgba(30,30,30,0.95)100%);backdrop-filter:blur(10px);padding:16px;border-radius:16px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 4px 20px rgba(0,0,0,0.8)}
        .info-name{font-size:18px;font-weight:900;margin-bottom:8px;color:white;text-shadow:0 2px 4px rgba(0,0,0,0.8)}
        .info-time{font-size:13px;margin-bottom:12px;opacity:0.8;color:#d4d4d4}
        .info-stats{display:flex;flex-direction:column;gap:8px}
        .info-stats span{display:flex;align-items:center;gap:8px;color:white;font-weight:600;font-size:14px}
        .action-buttons{position:fixed;bottom:100px;right:20px;display:flex;flex-direction:column;gap:20px;z-index:200}
        .action-btn{width:56px;height:56px;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;border:none;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);box-shadow:0 6px 20px rgba(0,0,0,0.6);position:relative;overflow:hidden}
        .action-btn::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.1);opacity:0;transition:opacity 0.3s}
        .action-btn:hover::before{opacity:1}
        .action-btn:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 10px 30px rgba(255,255,255,0.2)}
        .action-btn span.icon{font-size:26px;position:relative;z-index:1}
        .action-btn span.count{font-size:11px;font-weight:bold;color:white;margin-top:2px;position:relative;z-index:1;text-shadow:0 1px 2px rgba(0,0,0,0.5)}
        .action-btn.liked{animation:pulseLike 0.5s ease}
        @keyframes pulseLike{0%,100%{transform:scale(1)}25%{transform:scale(1.2)}50%{transform:scale(1.1)}75%{transform:scale(1.3)}}
        .modal-counter{position:fixed;top:20px;left:50%;transform:translateX(-50%);z-index:200;background:linear-gradient(135deg,rgba(0,0,0,0.95)0%,rgba(30,30,30,0.95)100%);backdrop-filter:blur(10px);padding:10px 24px;border-radius:30px;color:white;font-weight:bold;font-size:14px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 4px 15px rgba(0,0,0,0.6)}
        .modal-comments-section{width:420px;max-width:90vw;background:linear-gradient(135deg,rgba(255,255,255,0.98)0%,rgba(245,245,245,0.98)100%);backdrop-filter:blur(20px);border-radius:20px;display:flex;flex-direction:column;overflow:hidden;transform:translateX(100%);transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);position:fixed;right:20px;top:50%;transform:translate(150%,-50%);max-height:80vh;z-index:1002;box-shadow:0 15px 50px rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.2)}
        .modal-comments-section.show{transform:translate(0,-50%)}
        .comments-list{flex:1;overflow-y:auto;padding:16px;max-height:500px;min-height:300px}
        .comment-item{background:white;border-radius:16px;padding:14px;margin-bottom:12px;box-shadow:0 2px 10px rgba(0,0,0,0.08);border:1px solid #e5e5e5;transition:all 0.2s}
        .comment-item:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(0,0,0,0.12)}
        .comment-item p{color:#1a1a1a;font-size:14px;line-height:1.5;margin-bottom:6px}
        .comment-item .comment-time{font-size:11px;color:#666;text-align:right}
        .comment-input-area{padding:20px;border-top:1px solid #e5e5e5;background:rgba(255,255,255,0.9)}
        .comment-input-area .flex{gap:12px}
        #commentInput{flex:1;padding:14px 18px;border:2px solid #e5e5e5;border-radius:14px;font-size:14px;transition:all 0.3s;background:white;color:#000}
        #commentInput:focus{border-color:#333;box-shadow:0 0 0 3px rgba(0,0,0,0.1)}
        #sendCommentBtn{background:linear-gradient(135deg,#333 0%,#000 100%);color:white;padding:14px 24px;border-radius:14px;font-weight:600;font-size:14px;border:none;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 15px rgba(0,0,0,0.3)}
        #sendCommentBtn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,0.4)}
        #sendCommentBtn:active{transform:translateY(0)}
        .comments-header{background:linear-gradient(135deg,#1a1a1a 0%,#000 100%);padding:20px;position:relative}
        .comments-header h3{color:white;font-size:18px;font-weight:800;margin:0;display:flex;align-items:center;gap:10px}
        .comments-count{background:rgba(255,255,255,0.2);padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}
        .close-comments-btn{width:32px;height:32px;border-radius:50%;background:rgba(255,255,255,0.2);color:white;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:bold;transition:all 0.3s ease;flex-shrink:0}
        .close-comments-btn:hover{background:rgba(255,255,255,0.3);transform:scale(1.1) rotate(90deg)}
        .close-comments-btn:active{transform:scale(0.95)}
        @media (max-width:1024px){
            .modal-content-wrapper{flex-direction:column;max-height:90vh;overflow-y:auto}
            .modal-comments-section{width:90vw;max-width:500px;max-height:60vh;top:auto;bottom:20px;right:50%;transform:translate(50%,150%);border-radius:20px}
            .modal-comments-section.show{transform:translate(50%,0)}
            .info-panel{bottom:80px;left:15px;max-width:55%;padding:12px}
            .info-name{font-size:16px}
            .info-time{font-size:12px}
            .action-buttons{bottom:80px;right:15px;gap:12px}
            .action-btn{width:50px;height:50px}
            .action-btn span.icon{font-size:22px}
            .zoom-control{bottom:20px;padding:10px 20px;gap:12px}
            .zoom-slider{width:120px}
            .close-comments-btn{width:28px;height:28px;font-size:16px}
        }
        #cursorCanvas{position:fixed;top:0;left:0;pointer-events:none;z-index:9998}
    </style>
</head>
<body>
    <video id="videoBackground" class="video-background" muted loop playsinline preload="auto" autoplay>
        <source src="https://www.dropbox.com/scl/fi/9fhcf4k3fhspf8ske4kae/background_efe441534ad5-_1_.webm?rlkey=ouwaul701h057u5fbnnip7rq7&st=w5w5zu8n&raw=1" type="video/mp4">
    </video>
    
    <div class="overlay_audio" id="overlay">
        <p class="text">Click</p>
    </div>

    <canvas id="cursorCanvas"></canvas>
    <div class="heart-container" id="heartContainer"></div>
    <div class="stars" id="stars"></div>
    <div class="content min-h-screen p-4 md:p-8">
        <div class="max-w-5xl mx-auto">
            <div class="card rounded-3xl p-8 md:p-10 mb-8">
                <div class="text-center mb-8">
                    <div class="inline-block floating">
                        <span class="text-6xl mb-4 block">üì∏</span>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-black text-white text-glow mb-3">
                        A1K50-PTT
                    </h1>
                    <div class="flex items-center justify-center gap-3 flex-wrap">
                        <p class="text-gray-200 text-sm">ƒë∆∞a ·∫£nh l√™n</p>
                        <span class="live-badge">
                            <span class="live-dot"></span>
                            <span>ON</span>
                        </span>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div class="group">
                        <label class="block text-sm font-bold text-white mb-3 flex items-center gap-2">
                            <span class="text-xl">üè¥‚Äç‚ò†Ô∏è</span>
                            <span>Th√¥ng tin ch√≠nh v·ªÅ ·∫£nh</span>
                        </label>
                        <input
                            type="text"
                            id="userName"
                            placeholder="Th√¥ng tin ch√≠nh v·ªÅ ·∫£nh..."
                            class="w-full px-5 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/20 rounded-2xl focus:ring-4 focus:ring-white/30 focus:border-white/40 text-lg transition-all duration-300 hover:border-white/30 text-white placeholder-gray-300"
                        />
                    </div>

                    <div class="group">
                        <label class="block text-sm font-bold text-white mb-3 flex items-center gap-2">
                            <span class="text-xl">üñºÔ∏è</span>
                            <span>Ch·ªçn ·∫£nh (ho·∫∑c Ctrl+V)</span>
                        </label>
                        <input
                            type="file"
                            id="fileInput"
                            accept="image/*"
                            multiple
                            class="w-full px-4 py-3 bg-white/10 backdrop-blur-sm border-2 border-white/20 rounded-2xl file:mr-4 file:py-3 file:px-6 file:rounded-xl file:border-0 file:bg-gradient-to-r file:from-white file:to-gray-200 file:text-black file:font-bold hover:file:from-gray-100 hover:file:to-gray-300 transition-all cursor:pointer hover:border-white/30 text-white"
                        />
                    </div>

                    <div id="previewContainer" class="hidden">
                        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-5 border-2 border-white/15">
                            <p class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                                <span class="text-lg">‚ú®</span>
                                <span>ƒê√£ ch·ªçn <span id="fileCount" class="text-gray-200">0</span> ·∫£nh</span>
                            </p>
                            <div id="previewGrid" class="preview-grid"></div>
                        </div>
                    </div>

                    <div id="uploadProgress" class="text-center hidden">
                        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border-2 border-white/15">
                            <div class="shimmer h-3 rounded-full mb-3"></div>
                            <p class="text-white font-bold text-lg"></p>
                        </div>
                    </div>

                    <button
                        id="uploadBtn"
                        class="upload-btn w-full bg-gradient-to-r from-white via-gray-200 to-white text-black py-5 rounded-2xl font-black text-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:-translate-y-1 active:translate-y-0 shadow-lg shadow-white/20"
                    >
                        <span class="flex items-center justify-center gap-3 relative z-10">
                            <span class="text-2xl">üòé</span>
                            <span>T·∫£i l√™n ngay</span>
                        </span>
                    </button>
                </div>
            </div>

            <div class="card rounded-3xl p-8 md:p-10 border-2 border-white/20">
                <div class="text-center mb-8">
                    <h2 class="text-3xl md:text-4xl font-black text-white text-glow mb-3 flex items-center justify-center gap-3">
                        <span class="text-4xl">üí©</span>
                        <span>Th∆∞ vi·ªán ·∫£nh</span>
                    </h2>
                    <p class="text-gray-200">
                        <span class="inline-block bg-gradient-to-r from-white to-gray-200 text-black px-5 py-2 rounded-full font-bold text-lg shadow-lg shadow-white/20">
                            <span id="galleryCount">0</span> ·∫£nh
                        </span>
                    </p>
                </div>
                
                <div id="gallery" class="space-y-4">
                    <div class="text-center py-20">
                        <div class="floating text-6xl mb-4">üåü</div>
                        <p class="text-xl text-white font-medium">ƒêang t·∫£i ·∫£nh...</p>
                        <p class="text-sm text-gray-300 mt-2">t·ª´ t·ª´...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal" class="modal">
        <button id="closeModal" class="absolute top-6 right-6 bg-white/90 backdrop-blur-sm text-black p-4 rounded-2xl hover:bg-white transition-all shadow-2xl z-10 font-bold text-xl hover:rotate-90 duration-300 border-none cursor:pointer">
            ‚úï
        </button>
        <button id="prevBtn" class="absolute left-6 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm text-black p-4 rounded-2xl hover:bg-white transition-all shadow-2xl z-10 text-2xl hover:scale-110 duration-300 border-none cursor:pointer">
            ‚Äπ
        </button>
        <button id="nextBtn" class="absolute right-6 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm text-black p-4 rounded-2xl hover:bg-white transition-all shadow-2xl z-10 text-2xl hover:scale-110 duration-300 border-none cursor:pointer">
            ‚Ä∫
        </button>
        
        <div class="modal-content-wrapper px-4">
            <div class="modal-image-section">
                <div class="image-container" id="imageContainer">
                    <div class="image-wrapper" id="imageWrapper">
                        <img id="modalImage" />
                    </div>
                </div>
            </div>

            <p id="modalCounter" class="modal-counter text-white bg-black/60 backdrop-blur-sm px-5 py-2 rounded-full font-bold"></p>

            <div class="zoom-control">
                <button id="zoomOutBtn" class="zoom-btn">-</button>
                <input type="range" id="zoomSlider" class="zoom-slider" min="100" max="400" value="100" step="10">
                <button id="zoomInBtn" class="zoom-btn">+</button>
                <span class="text-white font-bold text-xs" id="zoomValue">100%</span>
                <button id="resetZoomBtn" class="zoom-btn" title="Reset zoom">t·∫£i l·∫°i</button>
            </div>

            <div class="info-panel">
                <p id="modalName" class="info-name"></p>
                <p id="modalTime" class="info-time"></p>
                <div class="info-stats">
                    <span id="modalLikes">‚ù§Ô∏è <span id="modalLikesCount">0</span> l∆∞·ª£t th√≠ch</span>
                    <span id="modalComments">üí¨ <span id="modalCommentsCount">0</span> b√¨nh lu·∫≠n</span>
                </div>
            </div>

            <div class="action-buttons">
                <button id="likeBtn" class="action-btn bg-gradient-to-r from-red-500 via-pink-500 to-rose-500">
                    <span class="icon">‚ù§Ô∏è</span>
                    <span class="count" id="likeCount">0</span>
                </button>
                <button id="toggleCommentsBtn" class="action-btn bg-gradient-to-r from-blue-500 via-purple-500 to-indigo-500">
                    <span class="icon">üí¨</span>
                    <span class="count" id="commentCount">0</span>
                </button>
            </div>

            <div class="modal-comments-section">
                <div class="comments-header">
                    <div class="flex items-center justify-between w-full">
                        <h3 class="flex items-center gap-2">
                            <span>üí¨</span>
                            <span>B√¨nh lu·∫≠n</span>
                            <span class="comments-count" id="commentsCount">0</span>
                        </h3>
                        <button id="closeCommentsBtn" class="close-comments-btn" title="ƒê√≥ng b√¨nh lu·∫≠n">
                            ‚úï
                        </button>
                    </div>
                </div>
                <div class="comments-list" id="commentsList">
                    <p class="text-gray-400 text-center py-8">ko c√≥ b√¨nh lu·∫≠n</p>
                </div>
                <div class="comment-input-area">
                    <div class="flex">
                        <input
                            type="text"
                            id="commentInput"
                            placeholder="Vi·∫øt b√¨nh lu·∫≠n c·ªßa b·∫°n..."
                            class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-purple-500 transition-all"
                        />
                        <button
                            id="sendCommentBtn"
                            class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-xl font-bold hover:shadow-lg transition-all border-none cursor:pointer"
                        >
                            ƒêƒÇNG
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, push, onValue, query, orderByChild, update, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        const firebaseConfig = {
  apiKey: "AIzaSyA-Ozo0SSikbAi8yHZPXrPi8rNKf6isIJ0",
  authDomain: "a1k50-4d3f7.firebaseapp.com",
  databaseURL: "https://a1k50-4d3f7-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "a1k50-4d3f7",
  storageBucket: "a1k50-4d3f7.firebasestorage.app",
  messagingSenderId: "777474259526",
  appId: "1:777474259526:web:49af3740ded4b96363a847"
};

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const imagesRef = ref(database, 'images');

        const CLOUD_NAME = 'dbyap7mw2';
        const UPLOAD_PRESET = 'A1K50_PTT';
        
        let selectedFiles = [];
        let images = [];
        let currentViewIndex = 0;
        let currentImageId = null;
        
        let scale = 1;
        let translateX = 0;
        let translateY = 0;
        let isDragging = false;
        let startX = 0;
        let startY = 0;
        
        let isCommentInputFocused = false;
        let experienceStarted = false;
        function startExperience() {
            if (experienceStarted) return;
            experienceStarted = true;
            
            const overlay = document.getElementById('overlay');
            const video = document.getElementById('videoBackground');
            
            overlay.style.opacity = '0';
            setTimeout(() => overlay.style.display = 'none', 300);
            video.play().then(() => {
                console.log('Video started playing');
                setTimeout(() => video.classList.add('active'), 50);
            }).catch(err => {
                console.error('Video play error:', err);
                setTimeout(() => video.play(), 100);
            });
            video.addEventListener('ended', () => {
                video.currentTime = 0;
                video.play();
            });
            
            initCursorEffect();
        }        function initCursorEffect() {
            const canvas = document.getElementById('cursorCanvas');
            const ctx = canvas.getContext('2d');
            
            let width = window.innerWidth, height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;

            const particles = [], lifeSpan = 40, maxDelay = 50, minDelay = 5;
            let lastTime = Date.now(), interval = Math.floor(Math.random() * (maxDelay - minDelay + 1)) + minDelay;
            
            const cursorImg = new Image();
            cursorImg.src = 'https://r2.zyo.lol/cursor_url_2c8437bbd547.cur';

            class Particle {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                    this.life = lifeSpan;
                    this.maxLife = lifeSpan;
                }
                update() {
                    this.life--;
                }
                draw() {
                    const opacity = Math.max(this.life / this.maxLife, 0);
                    ctx.globalAlpha = opacity;
                    ctx.drawImage(cursorImg, this.x - 8, this.y - 8, 16, 16);
                }
            }

            function animate() {
                ctx.clearRect(0, 0, width, height);
                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    particles[i].draw();
                    if (particles[i].life <= 0) particles.splice(i, 1);
                }
                requestAnimationFrame(animate);
            }

            document.addEventListener('mousemove', (e) => {
                if (lastTime + interval <= Date.now()) {
                    particles.push(new Particle(e.clientX, e.clientY));
                    lastTime = Date.now();
                    interval = Math.floor(Math.random() * (maxDelay - minDelay + 1)) + minDelay;
                }
            });

            window.addEventListener('resize', () => {
                width = window.innerWidth;
                height = window.innerHeight;
                canvas.width = width;
                canvas.height = height;
            });

            animate();
        }
        document.addEventListener('click', function(e) {
            if (!experienceStarted) return;
            
            const ripple = document.createElement('div');
            ripple.style.cssText = `
                position: fixed;
                width: 100px;
                height: 100px;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.3);
                transform: translate(-50%, -50%);
                pointer-events: none;
                z-index: 10000;
                animation: ripple 0.6s ease-out forwards;
            `;
            
            ripple.style.left = e.clientX + 'px';
            ripple.style.top = e.clientY + 'px';
            document.body.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 600);
        });
        document.getElementById('overlay').addEventListener('click', startExperience);

        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 200;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                const size = Math.random() * 3 + 1;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                star.style.animationDelay = Math.random() * 3 + 's';
                
                starsContainer.appendChild(star);
            }
        }

        function createFallingHeart(x, y) {
            const heart = document.createElement('div');
            heart.className = 'falling-heart';
            heart.textContent = '‚ù§Ô∏è';
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            
            document.getElementById('heartContainer').appendChild(heart);
            
            setTimeout(() => heart.remove(), 2000);
        }

        createStars();
        loadImages();

        const commentInput = document.getElementById('commentInput');
        commentInput.addEventListener('focus', () => {
            isCommentInputFocused = true;
        });
        
        commentInput.addEventListener('blur', () => {
            isCommentInputFocused = false;
        });
        
        commentInput.addEventListener('keydown', (e) => {
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            if (e.key === 'Escape') {
                commentInput.blur();
            }
        });
        
        commentInput.addEventListener('keyup', (e) => {
            e.stopPropagation();
        });
        
        commentInput.addEventListener('keypress', (e) => {
            e.stopPropagation();
        });

        function setupZoomPan() {
            const imageContainer = document.getElementById('imageContainer');
            const imageWrapper = document.getElementById('imageWrapper');
            const zoomSlider = document.getElementById('zoomSlider');
            const zoomValue = document.getElementById('zoomValue');
            const zoomInBtn = document.getElementById('zoomInBtn');
            const zoomOutBtn = document.getElementById('zoomOutBtn');
            const resetZoomBtn = document.getElementById('resetZoomBtn');

            scale = 1;
            translateX = 0;
            translateY = 0;
            applyTransform();

            imageContainer.addEventListener('wheel', (e) => {
                e.preventDefault();
                
                const rect = imageContainer.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                const delta = e.deltaY > 0 ? 0.9 : 1.1;
                const newScale = Math.max(1, Math.min(4, scale * delta));
                
                if (newScale !== scale) {
                    const scaleChange = newScale / scale;
                    
                    translateX = mouseX - (mouseX - translateX) * scaleChange;
                    translateY = mouseY - (mouseY - translateY) * scaleChange;
                    
                    scale = newScale;
                    applyTransform();
                    updateZoomControls();
                }
            });

            imageContainer.addEventListener('mousedown', (e) => {
                if (scale <= 1) return;
                
                isDragging = true;
                startX = e.clientX - translateX;
                startY = e.clientY - translateY;
                imageContainer.style.cursor = 'grabbing';
                
                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
            });

            imageContainer.addEventListener('touchstart', (e) => {
                if (scale <= 1 || !e.touches[0]) return;
                
                isDragging = true;
                const touch = e.touches[0];
                startX = touch.clientX - translateX;
                startY = touch.clientY - translateY;
                imageContainer.style.cursor = 'grabbing';
                
                document.addEventListener('touchmove', onTouchMove);
                document.addEventListener('touchend', onTouchEnd);
            });

            function onMouseMove(e) {
                if (!isDragging) return;
                
                translateX = e.clientX - startX;
                translateY = e.clientY - startY;
                applyTransform();
            }

            function onTouchMove(e) {
                if (!isDragging || !e.touches[0]) return;
                
                const touch = e.touches[0];
                translateX = touch.clientX - startX;
                translateY = touch.clientY - startY;
                applyTransform();
                e.preventDefault();
            }

            function onMouseUp() {
                isDragging = false;
                imageContainer.style.cursor = scale > 1 ? 'grab' : 'default';
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
            }

            function onTouchEnd() {
                isDragging = false;
                imageContainer.style.cursor = scale > 1 ? 'grab' : 'default';
                document.removeEventListener('touchmove', onTouchMove);
                document.removeEventListener('touchend', onTouchEnd);
            }

            zoomSlider.addEventListener('input', (e) => {
                const newScale = parseInt(e.target.value) / 100;
                
                if (newScale !== scale) {
                    const rect = imageContainer.getBoundingClientRect();
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const scaleChange = newScale / scale;
                    translateX = centerX - (centerX - translateX) * scaleChange;
                    translateY = centerY - (centerY - translateY) * scaleChange;
                    
                    scale = newScale;
                    applyTransform();
                    updateZoomValue();
                }
            });

            zoomInBtn.addEventListener('click', () => {
                const newScale = Math.min(4, scale + 0.2);
                if (newScale !== scale) {
                    const rect = imageContainer.getBoundingClientRect();
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const scaleChange = newScale / scale;
                    translateX = centerX - (centerX - translateX) * scaleChange;
                    translateY = centerY - (centerY - translateY) * scaleChange;
                    
                    scale = newScale;
                    applyTransform();
                    updateZoomControls();
                }
            });

            zoomOutBtn.addEventListener('click', () => {
                const newScale = Math.max(1, scale - 0.2);
                if (newScale !== scale) {
                    const rect = imageContainer.getBoundingClientRect();
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const scaleChange = newScale / scale;
                    translateX = centerX - (centerX - translateX) * scaleChange;
                    translateY = centerY - (centerY - translateY) * scaleChange;
                    
                    scale = newScale;
                    applyTransform();
                    updateZoomControls();
                }
            });

            resetZoomBtn.addEventListener('click', resetZoom);

            function applyTransform() {
                imageWrapper.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
                
                const imageContainer = document.getElementById('imageContainer');
                imageContainer.style.cursor = scale > 1 ? 'grab' : 'default';
                if (isDragging) {
                    imageContainer.style.cursor = 'grabbing';
                }
            }

            function updateZoomControls() {
                zoomSlider.value = scale * 100;
                zoomValue.textContent = `${Math.round(scale * 100)}%`;
            }

            function updateZoomValue() {
                zoomValue.textContent = `${Math.round(scale * 100)}%`;
            }
        }

        function resetZoom() {
            scale = 1;
            translateX = 0;
            translateY = 0;
            const imageWrapper = document.getElementById('imageWrapper');
            const imageContainer = document.getElementById('imageContainer');
            
            imageWrapper.style.transform = 'translate(0, 0) scale(1)';
            imageContainer.style.cursor = 'default';
            
            document.getElementById('zoomSlider').value = 100;
            document.getElementById('zoomValue').textContent = '100%';
        }

        document.getElementById('fileInput').addEventListener('change', (e) => {
            handleFiles(Array.from(e.target.files));
        });

        document.addEventListener('paste', (e) => {
            const items = e.clipboardData.items;
            const files = [];
            for (let i = 0; i < items.length; i++) {
                if (items[i].type.indexOf('image') !== -1) {
                    files.push(items[i].getAsFile());
                }
            }
            if (files.length > 0) {
                handleFiles(files);
                e.preventDefault();
            }
        });

        document.getElementById('uploadBtn').addEventListener('click', uploadImages);
        document.getElementById('closeModal').addEventListener('click', () => {
            document.getElementById('modal').classList.remove('active');
            document.querySelector('.modal-comments-section').classList.remove('show');
            resetZoom();
        });

        document.getElementById('toggleCommentsBtn').addEventListener('click', (e) => {
            e.stopPropagation();
            document.querySelector('.modal-comments-section').classList.toggle('show');
        });

        document.getElementById('closeCommentsBtn').addEventListener('click', function(e) {
            e.stopPropagation();
            document.querySelector('.modal-comments-section').classList.remove('show');
        });

        document.addEventListener('keydown', function(e) {
            if (!document.getElementById('modal').classList.contains('active')) return;
            
            if (isCommentInputFocused) {
                if (e.key === 'Escape') {
                    document.getElementById('modal').classList.remove('active');
                    document.querySelector('.modal-comments-section').classList.remove('show');
                    resetZoom();
                }
                return;
            }
            
            if (e.key === 'Escape') {
                document.getElementById('modal').classList.remove('active');
                document.querySelector('.modal-comments-section').classList.remove('show');
                resetZoom();
            } else if (e.key === 'ArrowLeft') {
                currentViewIndex = (currentViewIndex - 1 + images.length) % images.length;
                showImage(currentViewIndex);
                resetZoom();
            } else if (e.key === 'ArrowRight') {
                currentViewIndex = (currentViewIndex + 1) % images.length;
                showImage(currentViewIndex);
                resetZoom();
            }
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            currentViewIndex = (currentViewIndex - 1 + images.length) % images.length;
            showImage(currentViewIndex);
            resetZoom();
        });
        
        document.getElementById('nextBtn').addEventListener('click', () => {
            currentViewIndex = (currentViewIndex + 1) % images.length;
            showImage(currentViewIndex);
            resetZoom();
        });

        document.getElementById('likeBtn').addEventListener('click', async function(e) {
            if (!currentImageId) return;
            
            e.stopPropagation();
            
            const rect = this.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top;
            
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createFallingHeart(
                        x + (Math.random() - 0.5) * 50, 
                        y + (Math.random() - 0.5) * 30
                    );
                }, i * 100);
            }
            
            this.classList.add('liked');
            setTimeout(() => this.classList.remove('liked'), 500);
            
            const img = images[currentViewIndex];
            const newLikes = (img.likes || 0) + 1;
            
            const imageRef = ref(database, `images/${currentImageId}`);
            await update(imageRef, { likes: newLikes });
            
            document.getElementById('likeCount').textContent = newLikes;
            document.getElementById('modalLikesCount').textContent = newLikes;
        });

        async function sendComment(event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const input = document.getElementById('commentInput');
            const text = input.value.trim();
            
            if (!text || !currentImageId) return;
            
            const commentsRef = ref(database, `images/${currentImageId}/comments`);
            
            try {
                await push(commentsRef, {
                    text: text,
                    timestamp: Date.now(),
                    user: 'th√°ch ƒë·ªë m·∫•y ƒëo√°n tao l√† ai üòé'
                });
                
                input.value = '';
                input.focus();
                
                const img = images[currentViewIndex];
                const commentCount = img.comments ? Object.keys(img.comments).length + 1 : 1;
                document.getElementById('commentCount').textContent = commentCount;
                document.getElementById('modalCommentsCount').textContent = commentCount;
                document.getElementById('commentsCount').textContent = commentCount;
                
                const snapshot = await get(commentsRef);
                loadComments(currentImageId, snapshot.val());
                
            } catch (error) {
                console.error('l√µi', error);
                alert('l√µi: ' + error.message);
            }
        }

        document.getElementById('sendCommentBtn').addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            sendComment(e);
        });

        document.getElementById('commentInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                e.stopPropagation();
                sendComment(e);
            }
        });

        function handleFiles(files) {
            const imageFiles = files.filter(f => f.type.startsWith('image/'));
            selectedFiles = [...selectedFiles, ...imageFiles];
            updatePreview();
        }

        function updatePreview() {
            const container = document.getElementById('previewContainer');
            const grid = document.getElementById('previewGrid');
            const count = document.getElementById('fileCount');
            
            if (selectedFiles.length === 0) {
                container.classList.add('hidden');
                return;
            }

            container.classList.remove('hidden');
            count.textContent = selectedFiles.length;
            grid.innerHTML = '';

            selectedFiles.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const div = document.createElement('div');
                    div.className = 'preview-item';
                    div.innerHTML = `
                        <img src="${e.target.result}" alt="Preview ${index + 1}">
                        <button onclick="window.removeFile(${index})">‚úï</button>
                    `;
                    grid.appendChild(div);
                };
                reader.readAsDataURL(file);
            });
        }

        window.removeFile = function(index) {
            selectedFiles.splice(index, 1);
            updatePreview();
        }

        async function uploadImages() {
            const name = document.getElementById('userName').value.trim();
            
            if (selectedFiles.length === 0 || !name) {
                alert('nh·∫≠p t√™n v√† anh ƒëi');
                return;
            }

            const btn = document.getElementById('uploadBtn');
            const progress = document.getElementById('uploadProgress');
            
            btn.disabled = true;
            progress.classList.remove('hidden');

            let uploadedCount = 0;
            const totalFiles = selectedFiles.length;

            for (let i = 0; i < totalFiles; i++) {
                progress.innerHTML = `
                    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border-2 border-white/20">
                        <div class="shimmer h-3 rounded-full mb-3"></div>
                        <p class="text-white font-bold text-lg">ƒêang t·∫£i ${i + 1}/${totalFiles}... ‚è≥</p>
                    </div>
                `;

                const formData = new FormData();
                formData.append('file', selectedFiles[i]);
                formData.append('upload_preset', UPLOAD_PRESET);

                try {
                    const response = await fetch(
                        `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,
                        { method: 'POST', body: formData }
                    );

                    const data = await response.json();
                    
                    if (data.secure_url) {
                        await push(imagesRef, {
                            url: data.secure_url,
                            name: name,
                            timestamp: Date.now(),
                            likes: 0,
                            comments: {}
                        });
                        uploadedCount++;
                    }

                    await new Promise(resolve => setTimeout(resolve, 500));
                } catch (error) {
                    console.error('Upload error:', error);
                }
            }

            selectedFiles = [];
            document.getElementById('fileInput').value = '';
            document.getElementById('userName').value = '';
            updatePreview();
            progress.classList.add('hidden');
            btn.disabled = false;
            
            alert(`ƒê√£ t·∫£i ${uploadedCount} ·∫£nh th√†nh c√¥ng!`);
        }

        function loadImages() {
            const imagesQuery = query(imagesRef, orderByChild('timestamp'));
            
            onValue(imagesQuery, (snapshot) => {
                images = [];
                snapshot.forEach((childSnapshot) => {
                    const img = childSnapshot.val();
                    images.push({
                        id: childSnapshot.key,
                        ...img
                    });
                });
                images.reverse();
                renderGallery();
            });
        }

        function renderGallery() {
            const gallery = document.getElementById('gallery');
            const count = document.getElementById('galleryCount');
            
            count.textContent = images.length;

            if (images.length === 0) {
                gallery.innerHTML = `
                    <div class="text-center py-20">
                        <div class="floating text-6xl mb-4">üåü</div>
                        <p class="text-xl text-white font-medium">ƒëang loat</p>
                        <p class="text-sm text-gray-300 mt-2">ƒë.......</p>
                    </div>
                `;
                return;
            }

            gallery.innerHTML = images.map((img, index) => `
                <div onclick="window.openModal(${index})" class="gallery-item bg-white/10 backdrop-blur-sm rounded-2xl p-5 shadow-lg hover:shadow-2xl transition-all border-2 border-white/20 hover:border-white/40">
                    <div class="flex items-center gap-5">
                        <div class="relative group flex-shrink-0">
                            <img src="${img.url}" alt="${img.name}" class="w-24 h-24 object-cover rounded-xl border-3 border-white/50 shadow-lg group-hover:scale-110 transition-transform duration-300">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-2">
                                <span class="text-white text-xs font-bold">üëÅÔ∏è Xem</span>
                            </div>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-black text-xl text-white truncate">${img.name}</p>
                            <p class="text-sm text-gray-300 mt-1 flex items-center gap-2">
                                <span>üïê</span>
                                <span>${formatTimeAgo(img.timestamp)}</span>
                            </p>
                            <div class="flex items-center gap-3 mt-2">
                                <span class="text-red-400 flex items-center gap-1">
                                    <span>‚ù§Ô∏è</span>
                                    <span class="font-bold">${img.likes || 0}</span>
                                </span>
                                <span class="text-blue-400 flex items-center gap-1">
                                    <span>üí¨</span>
                                    <span class="font-bold">${img.comments ? Object.keys(img.comments).length : 0}</span>
                                </span>
                            </div>
                        </div>
                        <div class="hidden md:flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-5 py-3 rounded-xl font-bold shadow-lg group-hover:scale-105 transition-transform flex-shrink-0">
                            <span>Xem</span>
                            <span class="text-xl">‚Üí</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        window.openModal = function(index) {
            currentViewIndex = index;
            showImage(index);
            document.getElementById('modal').classList.add('active');
            setTimeout(setupZoomPan, 100);
        }

        function showImage(index) {
            const img = images[index];
            currentImageId = img.id;
            
            const modalImage = document.getElementById('modalImage');
            modalImage.src = img.url;
            
            document.getElementById('modalName').textContent = img.name;
            document.getElementById('modalTime').textContent = formatTimeAgo(img.timestamp);
            document.getElementById('modalCounter').textContent = `${index + 1} / ${images.length}`;
            
            const likes = img.likes || 0;
            const commentCount = img.comments ? Object.keys(img.comments).length : 0;
            
            document.getElementById('likeCount').textContent = likes;
            document.getElementById('modalLikesCount').textContent = likes;
            document.getElementById('commentCount').textContent = commentCount;
            document.getElementById('modalCommentsCount').textContent = commentCount;
            document.getElementById('commentsCount').textContent = commentCount;
            
            loadComments(img.id, img.comments);
        }

        function loadComments(imageId, comments) {
            const commentsList = document.getElementById('commentsList');
            
            if (!comments || Object.keys(comments).length === 0) {
                commentsList.innerHTML = '<p class="text-gray-400 text-center py-8">Ch∆∞a c√≥ b√¨nh lu·∫≠n n√†o</p>';
                return;
            }
            
            const commentsArray = Object.entries(comments).map(([key, val]) => ({
                id: key,
                ...val
            })).sort((a, b) => b.timestamp - a.timestamp);
            
            commentsList.innerHTML = commentsArray.map(comment => {
                return `
                    <div class="comment-item">
                        <p class="text-gray-800 font-medium">${comment.text}</p>
                        <p class="comment-time">${formatTimeAgo(comment.timestamp)} ‚Ä¢ ${comment.user || 'Ng∆∞·ªùi d√πng'}</p>
                    </div>
                `;
            }).join('');
        }

        function formatTimeAgo(timestamp) {
            if (!timestamp) return 'V·ª´a xong';
            
            const now = Date.now();
            const diff = now - timestamp;
            const seconds = Math.floor(diff / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);

            if (days > 0) return `${days} ng√†y tr∆∞·ªõc`;
            if (hours > 0) return `${hours} gi·ªù tr∆∞·ªõc`;
            if (minutes > 0) return `${minutes} ph√∫t tr∆∞·ªõc`;
            return 'V·ª´a xong';
        }
    </script>
</body>
</html>


